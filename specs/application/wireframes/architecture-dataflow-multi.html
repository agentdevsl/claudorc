<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Architecture — Multi-User, Multi-Project</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link href="https://api.fontshare.com/v2/css?f[]=mona-sans@400,500,600,700&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { -webkit-font-smoothing: antialiased; }
    button { cursor: pointer; border: none; background: none; font: inherit; }

    :root {
      --bg-canvas: #0a0e14; --bg-default: #131920; --bg-subtle: #1a2230;
      --bg-emphasis: #2d3750; --border-default: #2a3445;
      --fg-default: #e2eaf4; --fg-muted: #7b8da6; --fg-subtle: #566580;
      --accent-fg: #58a6ff; --success-fg: #3fb950; --success-dim: #1a4028;
      --attention-fg: #d29922; --done-fg: #a371f7; --sdk-fg: #f778ba;
      --event-fg: #e8883a; --secondary-fg: #f778ba;
      --simon-fg: #58a6ff; --alex-fg: #3fb950;
      --font-sans: 'Mona Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      --font-mono: 'Fira Code', 'SF Mono', Menlo, Consolas, monospace;
      --radius: 6px; --radius-lg: 10px;
    }

    body { font-family: var(--font-sans); font-size: 13px; color: var(--fg-default); background: var(--bg-canvas); height: 100vh; overflow: hidden; }
    body::before { content:''; position:fixed; inset:0; background: radial-gradient(ellipse 600px 400px at 25% 30%, rgba(88,166,255,0.035), transparent), radial-gradient(ellipse 600px 400px at 75% 30%, rgba(63,185,80,0.03), transparent); pointer-events:none; z-index:0; }
    body::after { content:''; position:fixed; inset:0; background-image: linear-gradient(rgba(88,166,255,0.015) 1px, transparent 1px), linear-gradient(90deg, rgba(88,166,255,0.015) 1px, transparent 1px); background-size:48px 48px; pointer-events:none; z-index:0; }

    .page { display:flex; flex-direction:column; height:100vh; position:relative; z-index:1; }

    .header { display:flex; align-items:center; justify-content:space-between; padding:14px 24px; border-bottom:1px solid var(--border-default); background:rgba(10,14,20,0.85); backdrop-filter:blur(12px); flex-shrink:0; z-index:10; }
    .header-left { display:flex; align-items:center; gap:14px; }
    .logo-mark { width:28px; height:28px; border-radius:7px; background:linear-gradient(135deg,var(--accent-fg),var(--done-fg)); display:grid; place-items:center; font-weight:700; font-size:12px; color:#fff; }
    .header h1 { font-size:14px; font-weight:600; letter-spacing:-0.02em; }
    .header h1 span { color:var(--fg-muted); font-weight:400; margin-left:8px; }
    .legend { display:flex; gap:20px; font-size:10px; font-family:var(--font-mono); text-transform:uppercase; letter-spacing:0.06em; }
    .legend-item { display:flex; align-items:center; gap:7px; color:var(--fg-muted); }
    .legend-dot { width:7px; height:7px; border-radius:50%; }

    .canvas-wrap { flex:1; position:relative; overflow:hidden; }
    #conn-svg { position:absolute; inset:0; width:100%; height:100%; z-index:1; pointer-events:none; }
    .nodes-layer { position:absolute; inset:0; z-index:2; }

    .node { position:absolute; border:1px solid var(--border-default); border-radius:var(--radius-lg); background:var(--bg-default); transition:border-color 0.25s,box-shadow 0.25s; cursor:default; }
    .node:hover { border-color:var(--fg-subtle); box-shadow:0 4px 24px rgba(0,0,0,0.35); }
    .node-hdr { display:flex; align-items:center; gap:8px; padding:9px 12px; border-bottom:1px solid var(--border-default); font-weight:600; font-size:11px; }
    .node-ico { width:22px; height:22px; border-radius:5px; display:grid; place-items:center; flex-shrink:0; font-size:12px; }
    .node-lbl { display:flex; flex-direction:column; gap:1px; min-width:0; }
    .node-title { color:var(--fg-default); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; font-size:10px; }
    .node-sub { font-size:8px; font-weight:400; font-family:var(--font-mono); color:var(--fg-subtle); }
    .node-body { padding:6px 12px 8px; display:flex; flex-direction:column; gap:3px; }
    .node-row { font-size:9px; font-family:var(--font-mono); color:var(--fg-muted); display:flex; align-items:center; gap:5px; }
    .node-row .d { width:4px; height:4px; border-radius:50%; flex-shrink:0; }

    .status-pill { margin-left:auto; display:inline-flex; align-items:center; gap:4px; padding:2px 6px; border-radius:999px; font-size:8px; font-family:var(--font-mono); font-weight:500; }
    .status-pill .blink { width:5px; height:5px; border-radius:50%; animation:blink 2s ease-in-out infinite; }
    @keyframes blink { 0%,100%{opacity:1;} 50%{opacity:0.3;} }

    .node[data-type="user-simon"] { border-color:rgba(88,166,255,0.3); background:linear-gradient(145deg,var(--bg-default),rgba(45,90,142,0.12)); }
    .node[data-type="user-simon"] .node-ico { background:rgba(88,166,255,0.15); color:var(--simon-fg); }
    .node[data-type="user-alex"] { border-color:rgba(63,185,80,0.3); background:linear-gradient(145deg,var(--bg-default),rgba(26,64,40,0.12)); }
    .node[data-type="user-alex"] .node-ico { background:rgba(63,185,80,0.15); color:var(--alex-fg); }
    .node[data-type="agent-simon"] { border-color:rgba(163,113,247,0.25); background:linear-gradient(145deg,var(--bg-default),rgba(88,90,180,0.06)); }
    .node[data-type="agent-simon"] .node-ico { background:rgba(88,166,255,0.1); color:var(--accent-fg); }
    .node[data-type="agent-alex"] { border-color:rgba(63,185,80,0.2); background:linear-gradient(145deg,var(--bg-default),rgba(26,64,40,0.06)); }
    .node[data-type="agent-alex"] .node-ico { background:rgba(63,185,80,0.1); color:var(--alex-fg); }
    .node[data-type="sub-simon"] { border-color:rgba(163,113,247,0.15); background:linear-gradient(145deg,var(--bg-default),rgba(88,90,180,0.04)); }
    .node[data-type="sub-simon"] .node-ico { background:rgba(163,113,247,0.1); color:var(--done-fg); }
    .node[data-type="sub-alex"] { border-color:rgba(63,185,80,0.15); background:linear-gradient(145deg,var(--bg-default),rgba(26,64,40,0.04)); }
    .node[data-type="sub-alex"] .node-ico { background:rgba(63,185,80,0.08); color:var(--alex-fg); }

    .depth-bar { position:absolute; left:-2px; top:10px; bottom:10px; width:3px; border-radius:3px; }

    .project-label {
      position:absolute; z-index:3;
      font-size:9px; font-family:var(--font-mono); text-transform:uppercase; letter-spacing:0.08em;
      color:var(--fg-subtle); padding:3px 8px; border-radius:4px;
      border:1px dashed var(--border-default); background:rgba(10,14,20,0.6);
    }

    .conn-label { position:absolute; font-size:7px; font-family:var(--font-mono); text-transform:uppercase; letter-spacing:0.06em; pointer-events:none; z-index:3; padding:2px 5px; border-radius:3px; background:rgba(10,14,20,0.8); }

    .ticker { flex-shrink:0; height:36px; background:rgba(10,14,20,0.9); backdrop-filter:blur(8px); border-top:1px solid var(--border-default); display:flex; align-items:center; overflow:hidden; padding:0 16px; gap:8px; z-index:10; }
    .ticker-label { font-size:8px; font-family:var(--font-mono); text-transform:uppercase; letter-spacing:0.1em; color:var(--fg-subtle); flex-shrink:0; padding-right:10px; border-right:1px solid var(--border-default); }
    .ticker-track { flex:1; display:flex; gap:20px; animation:scroll 40s linear infinite; white-space:nowrap; }
    @keyframes scroll { 0%{transform:translateX(0);} 100%{transform:translateX(-50%);} }
    .tk-ev { display:flex; align-items:center; gap:5px; font-size:10px; font-family:var(--font-mono); color:var(--fg-muted); flex-shrink:0; }
    .tk-ev .tk-dot { width:4px; height:4px; border-radius:50%; }
    .tk-ev .tk-type { font-weight:500; }
    .tk-ev .tk-dim { color:var(--fg-subtle); }

    .info-panel { position:fixed; bottom:48px; right:16px; background:var(--bg-default); border:1px solid var(--border-default); border-radius:var(--radius-lg); padding:14px 16px; z-index:15; width:220px; }
    .ip-title { font-size:9px; font-family:var(--font-mono); text-transform:uppercase; letter-spacing:0.08em; color:var(--fg-subtle); margin-bottom:10px; }
    .ip-row { display:flex; align-items:center; justify-content:space-between; font-size:10px; font-family:var(--font-mono); color:var(--fg-muted); padding:3px 0; }
    .ip-row strong { color:var(--fg-default); font-weight:600; }
    .ip-sep { height:1px; background:var(--border-default); margin:6px 0; }

    @media (prefers-reduced-motion:reduce) { *,*::before,*::after { animation-duration:0.01ms!important; transition-duration:0.01ms!important; } }
  </style>
</head>
<body>
<div class="page">
  <header class="header">
    <div class="header-left">
      <div class="logo-mark">A</div>
      <h1>Architecture<span>Multi-User, Multi-Project</span></h1>
    </div>
    <div class="legend">
      <div class="legend-item"><div class="legend-dot" style="background:var(--simon-fg);box-shadow:0 0 6px rgba(88,166,255,0.4)"></div>Simon</div>
      <div class="legend-item"><div class="legend-dot" style="background:var(--alex-fg);box-shadow:0 0 6px rgba(63,185,80,0.4)"></div>Alex</div>
      <div class="legend-item"><div class="legend-dot" style="background:var(--done-fg);box-shadow:0 0 6px rgba(163,113,247,0.4)"></div>Agent</div>
      <div class="legend-item"><div class="legend-dot" style="background:var(--sdk-fg);box-shadow:0 0 6px rgba(247,120,186,0.4)"></div>Sub-Agent</div>
    </div>
  </header>

  <div class="canvas-wrap" id="canvas">
    <svg id="conn-svg">
      <defs><filter id="glow"><feGaussianBlur stdDeviation="3" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs>
    </svg>

    <div class="nodes-layer" id="nodes">

      <!-- Project group labels -->
      <div class="project-label" style="left:2%; top:0.5%;">agentpane</div>
      <div class="project-label" style="left:27%; top:0.5%;">cli-monitor</div>
      <div class="project-label" style="left:52%; top:0.5%;">backend-api</div>
      <div class="project-label" style="left:78%; top:0.5%;">frontend</div>

      <!-- ═════ COLUMN 1: agentpane (Simon) ═════ -->
      <div class="node" data-id="s-ap" data-type="user-simon" style="left:1%; top:5%; width:210px;">
        <div class="depth-bar" style="background:var(--simon-fg);"></div>
        <div class="node-hdr">
          <div class="node-ico"><svg width="14" height="14" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="5" r="3" stroke="currentColor" stroke-width="1.5"/><path d="M2 14c0-3.3 2.7-6 6-6s6 2.7 6 6" stroke="currentColor" stroke-width="1.5"/></svg></div>
          <div class="node-lbl"><span class="node-title">Simon — agentpane</span><span class="node-sub">usr-simon-01 · kanban-dnd</span></div>
          <div class="status-pill" style="background:var(--success-dim);color:var(--success-fg);"><span class="blink" style="background:var(--success-fg);"></span>working</div>
        </div>
        <div class="node-body">
          <div class="node-row"><div class="d" style="background:var(--simon-fg)"></div>Kanban drag-and-drop</div>
          <div class="node-row"><div class="d" style="background:var(--event-fg)"></div>210K tokens · sonnet-4</div>
        </div>
      </div>

      <div class="node" data-id="s-ap-a1" data-type="agent-simon" style="left:1%; top:25%; width:210px;">
        <div class="depth-bar" style="background:var(--done-fg);"></div>
        <div class="node-hdr">
          <div class="node-ico"><svg width="14" height="14" viewBox="0 0 16 16" fill="none"><rect x="2" y="3" width="12" height="10" rx="2" stroke="currentColor" stroke-width="1.5"/><path d="M5 7l2 1.5L5 10" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
          <div class="node-lbl"><span class="node-title">Agent: SortableCard</span><span class="node-sub">agt-sort01 · depth 1</span></div>
          <div class="status-pill" style="background:var(--success-dim);color:var(--success-fg);"><span class="blink" style="background:var(--success-fg);"></span>working</div>
        </div>
        <div class="node-body">
          <div class="node-row"><div class="d" style="background:var(--done-fg)"></div>dnd-kit sortable impl</div>
          <div class="node-row"><div class="d" style="background:var(--event-fg)"></div>88K tokens</div>
        </div>
      </div>

      <div class="node" data-id="s-ap-s1" data-type="sub-simon" style="left:1%; top:44%; width:100px;">
        <div class="depth-bar" style="background:var(--sdk-fg);"></div>
        <div class="node-hdr">
          <div class="node-ico"><svg width="12" height="12" viewBox="0 0 16 16" fill="none"><path d="M4 12l4-8 4 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></div>
          <div class="node-lbl"><span class="node-title">Sub: Tests</span><span class="node-sub">d2 · haiku</span></div>
        </div>
      </div>

      <div class="node" data-id="s-ap-s2" data-type="sub-simon" style="left:12%; top:44%; width:100px;">
        <div class="depth-bar" style="background:var(--sdk-fg);"></div>
        <div class="node-hdr">
          <div class="node-ico"><svg width="12" height="12" viewBox="0 0 16 16" fill="none"><rect x="3" y="3" width="10" height="10" rx="1.5" stroke="currentColor" stroke-width="1.5"/></svg></div>
          <div class="node-lbl"><span class="node-title">Sub: Types</span><span class="node-sub">d2 · haiku</span></div>
        </div>
      </div>

      <!-- ═════ COLUMN 2: cli-monitor (Simon) ═════ -->
      <div class="node" data-id="s-cm" data-type="user-simon" style="left:26%; top:5%; width:210px;">
        <div class="depth-bar" style="background:var(--simon-fg);"></div>
        <div class="node-hdr">
          <div class="node-ico"><svg width="14" height="14" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="5" r="3" stroke="currentColor" stroke-width="1.5"/><path d="M2 14c0-3.3 2.7-6 6-6s6 2.7 6 6" stroke="currentColor" stroke-width="1.5"/></svg></div>
          <div class="node-lbl"><span class="node-title">Simon — cli-monitor</span><span class="node-sub">usr-simon-m42 · hierarchy</span></div>
          <div class="status-pill" style="background:var(--success-dim);color:var(--success-fg);"><span class="blink" style="background:var(--success-fg);"></span>working</div>
        </div>
        <div class="node-body">
          <div class="node-row"><div class="d" style="background:var(--simon-fg)"></div>Hierarchy tree view</div>
          <div class="node-row"><div class="d" style="background:var(--event-fg)"></div>142K tokens · sonnet-4</div>
        </div>
      </div>

      <div class="node" data-id="s-cm-a1" data-type="agent-simon" style="left:26%; top:25%; width:210px;">
        <div class="depth-bar" style="background:var(--done-fg);"></div>
        <div class="node-hdr">
          <div class="node-ico"><svg width="14" height="14" viewBox="0 0 16 16" fill="none"><rect x="2" y="3" width="12" height="10" rx="2" stroke="currentColor" stroke-width="1.5"/><path d="M5 7l2 1.5L5 10" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
          <div class="node-lbl"><span class="node-title">Agent: Tree Renderer</span><span class="node-sub">agt-tree01 · depth 1</span></div>
          <div class="status-pill" style="background:rgba(210,153,34,0.2);color:var(--attention-fg);">approval</div>
        </div>
        <div class="node-body">
          <div class="node-row"><div class="d" style="background:var(--done-fg)"></div>SVG tree component</div>
          <div class="node-row"><div class="d" style="background:var(--event-fg)"></div>76K tokens</div>
        </div>
      </div>

      <div class="node" data-id="s-cm-s1" data-type="sub-simon" style="left:26%; top:44%; width:100px;">
        <div class="depth-bar" style="background:var(--sdk-fg);"></div>
        <div class="node-hdr">
          <div class="node-ico"><svg width="12" height="12" viewBox="0 0 16 16" fill="none"><path d="M2 4h12M2 8h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></div>
          <div class="node-lbl"><span class="node-title">Sub: Layout</span><span class="node-sub">d2 · haiku</span></div>
        </div>
      </div>

      <div class="node" data-id="s-cm-s2" data-type="sub-simon" style="left:37%; top:44%; width:100px;">
        <div class="depth-bar" style="background:var(--sdk-fg);"></div>
        <div class="node-hdr">
          <div class="node-ico"><svg width="12" height="12" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="8" r="5" stroke="currentColor" stroke-width="1.5"/></svg></div>
          <div class="node-lbl"><span class="node-title">Sub: Anim</span><span class="node-sub">d2 · haiku</span></div>
        </div>
      </div>

      <!-- ═════ COLUMN 3: backend-api (Alex) ═════ -->
      <div class="node" data-id="a-ba" data-type="user-alex" style="left:51%; top:5%; width:210px;">
        <div class="depth-bar" style="background:var(--alex-fg);"></div>
        <div class="node-hdr">
          <div class="node-ico"><svg width="14" height="14" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="5" r="3" stroke="currentColor" stroke-width="1.5"/><path d="M2 14c0-3.3 2.7-6 6-6s6 2.7 6 6" stroke="currentColor" stroke-width="1.5"/></svg></div>
          <div class="node-lbl"><span class="node-title">Alex — backend-api</span><span class="node-sub">usr-alex-api · rate-limiter</span></div>
          <div class="status-pill" style="background:var(--success-dim);color:var(--success-fg);"><span class="blink" style="background:var(--success-fg);"></span>working</div>
        </div>
        <div class="node-body">
          <div class="node-row"><div class="d" style="background:var(--alex-fg)"></div>Rate limiter + middleware</div>
          <div class="node-row"><div class="d" style="background:var(--event-fg)"></div>124K tokens · opus-4.5</div>
        </div>
      </div>

      <div class="node" data-id="a-ba-a1" data-type="agent-alex" style="left:51%; top:25%; width:105px;">
        <div class="depth-bar" style="background:var(--done-fg);"></div>
        <div class="node-hdr">
          <div class="node-ico"><svg width="12" height="12" viewBox="0 0 16 16" fill="none"><rect x="2" y="3" width="12" height="10" rx="2" stroke="currentColor" stroke-width="1.5"/></svg></div>
          <div class="node-lbl"><span class="node-title">Agent: Limiter</span><span class="node-sub">d1 · working</span></div>
        </div>
      </div>

      <div class="node" data-id="a-ba-a2" data-type="agent-alex" style="left:62%; top:25%; width:105px;">
        <div class="depth-bar" style="background:var(--done-fg);"></div>
        <div class="node-hdr">
          <div class="node-ico"><svg width="12" height="12" viewBox="0 0 16 16" fill="none"><rect x="2" y="3" width="12" height="10" rx="2" stroke="currentColor" stroke-width="1.5"/></svg></div>
          <div class="node-lbl"><span class="node-title">Agent: Tests</span><span class="node-sub">d1 · working</span></div>
        </div>
      </div>

      <div class="node" data-id="a-ba-s1" data-type="sub-alex" style="left:51%; top:44%; width:100px;">
        <div class="depth-bar" style="background:var(--sdk-fg);"></div>
        <div class="node-hdr">
          <div class="node-ico"><svg width="12" height="12" viewBox="0 0 16 16" fill="none"><path d="M4 12l4-8 4 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></div>
          <div class="node-lbl"><span class="node-title">Sub: Redis</span><span class="node-sub">d2 · haiku</span></div>
        </div>
      </div>

      <div class="node" data-id="a-ba-s2" data-type="sub-alex" style="left:62%; top:44%; width:100px;">
        <div class="depth-bar" style="background:var(--sdk-fg);"></div>
        <div class="node-hdr">
          <div class="node-ico"><svg width="12" height="12" viewBox="0 0 16 16" fill="none"><path d="M4 4l8 8M12 4l-8 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></div>
          <div class="node-lbl"><span class="node-title">Sub: E2E</span><span class="node-sub">d2 · haiku</span></div>
        </div>
      </div>

      <!-- ═════ COLUMN 4: frontend (Alex) ═════ -->
      <div class="node" data-id="a-fe" data-type="user-alex" style="left:77%; top:5%; width:210px;">
        <div class="depth-bar" style="background:var(--alex-fg);"></div>
        <div class="node-hdr">
          <div class="node-ico"><svg width="14" height="14" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="5" r="3" stroke="currentColor" stroke-width="1.5"/><path d="M2 14c0-3.3 2.7-6 6-6s6 2.7 6 6" stroke="currentColor" stroke-width="1.5"/></svg></div>
          <div class="node-lbl"><span class="node-title">Alex — frontend</span><span class="node-sub">usr-alex-fe · dark-mode</span></div>
          <div class="status-pill" style="background:var(--success-dim);color:var(--success-fg);"><span class="blink" style="background:var(--success-fg);"></span>working</div>
        </div>
        <div class="node-body">
          <div class="node-row"><div class="d" style="background:var(--alex-fg)"></div>System dark mode toggle</div>
          <div class="node-row"><div class="d" style="background:var(--event-fg)"></div>96K tokens · sonnet-4</div>
        </div>
      </div>

      <div class="node" data-id="a-fe-a1" data-type="agent-alex" style="left:77%; top:25%; width:105px;">
        <div class="depth-bar" style="background:var(--done-fg);"></div>
        <div class="node-hdr">
          <div class="node-ico"><svg width="12" height="12" viewBox="0 0 16 16" fill="none"><rect x="2" y="3" width="12" height="10" rx="2" stroke="currentColor" stroke-width="1.5"/></svg></div>
          <div class="node-lbl"><span class="node-title">Agent: Theme</span><span class="node-sub">d1 · working</span></div>
        </div>
      </div>

      <div class="node" data-id="a-fe-a2" data-type="agent-alex" style="left:88%; top:25%; width:105px;">
        <div class="depth-bar" style="background:var(--done-fg);"></div>
        <div class="node-hdr">
          <div class="node-ico"><svg width="12" height="12" viewBox="0 0 16 16" fill="none"><rect x="2" y="3" width="12" height="10" rx="2" stroke="currentColor" stroke-width="1.5"/></svg></div>
          <div class="node-lbl"><span class="node-title">Agent: Toggle</span><span class="node-sub">d1 · approval</span></div>
        </div>
      </div>

      <div class="node" data-id="a-fe-s1" data-type="sub-alex" style="left:77%; top:44%; width:100px;">
        <div class="depth-bar" style="background:var(--sdk-fg);"></div>
        <div class="node-hdr">
          <div class="node-ico"><svg width="12" height="12" viewBox="0 0 16 16" fill="none"><path d="M2 4h12M2 8h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></div>
          <div class="node-lbl"><span class="node-title">Sub: CSS Vars</span><span class="node-sub">d2 · haiku</span></div>
        </div>
      </div>

      <div class="node" data-id="a-fe-s2" data-type="sub-alex" style="left:88%; top:44%; width:100px;">
        <div class="depth-bar" style="background:var(--sdk-fg);"></div>
        <div class="node-hdr">
          <div class="node-ico"><svg width="12" height="12" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="8" r="5" stroke="currentColor" stroke-width="1.5"/></svg></div>
          <div class="node-lbl"><span class="node-title">Sub: Storage</span><span class="node-sub">d2 · haiku</span></div>
        </div>
      </div>

      <!-- ═════ BOTTOM ROW: Shared infrastructure ═════ -->
      <div class="node" data-id="sdk" data-type="sdk" style="left:25%; top:62%; width:200px; border-color:rgba(247,120,186,0.25); background:linear-gradient(145deg,var(--bg-default),rgba(120,50,90,0.08));">
        <div class="node-hdr">
          <div class="node-ico" style="background:rgba(247,120,186,0.15);color:var(--sdk-fg);"><svg width="14" height="14" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="1.5"/><circle cx="8" cy="8" r="1.5" fill="currentColor" opacity="0.4"/></svg></div>
          <div class="node-lbl"><span class="node-title">Claude Agent SDK</span><span class="node-sub">Shared across all sessions</span></div>
        </div>
        <div class="node-body">
          <div class="node-row"><div class="d" style="background:var(--sdk-fg)"></div>8 active SDK sessions</div>
          <div class="node-row"><div class="d" style="background:var(--sdk-fg)"></div>3 models in use</div>
        </div>
      </div>

      <div class="node" data-id="events" data-type="events" style="left:52%; top:62%; width:200px; border-color:rgba(232,136,58,0.25); background:linear-gradient(145deg,var(--bg-default),rgba(100,60,20,0.08));">
        <div class="node-hdr">
          <div class="node-ico" style="background:rgba(232,136,58,0.15);color:var(--event-fg);"><svg width="14" height="14" viewBox="0 0 16 16" fill="none"><path d="M2 4h12M2 8h12M2 12h12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></div>
          <div class="node-lbl"><span class="node-title">Event Stream</span><span class="node-sub">SSE + Durable Streams</span></div>
        </div>
        <div class="node-body">
          <div class="node-row"><div class="d" style="background:var(--event-fg)"></div>Cross-project visibility</div>
          <div class="node-row"><div class="d" style="background:var(--event-fg)"></div>Real-time to CLI Monitor</div>
        </div>
      </div>

    </div>
  </div>

  <div class="ticker">
    <div class="ticker-label">Live Events</div>
    <div class="ticker-track" id="ticker-track"></div>
  </div>
</div>

<div class="info-panel">
  <div class="ip-title">Multi-User Overview</div>
  <div class="ip-row"><span>Users</span><strong>2</strong></div>
  <div class="ip-row"><span>Projects</span><strong>4</strong></div>
  <div class="ip-row"><span>Agents (d1)</span><strong style="color:var(--done-fg)">6</strong></div>
  <div class="ip-row"><span>Sub-agents (d2)</span><strong style="color:var(--sdk-fg)">8</strong></div>
  <div class="ip-row"><span>Total sessions</span><strong>18</strong></div>
  <div class="ip-sep"></div>
  <div class="ip-row"><span style="color:var(--simon-fg)">Simon</span><strong>2 proj · 6 agents</strong></div>
  <div class="ip-row"><span style="color:var(--alex-fg)">Alex</span><strong>2 proj · 8 agents</strong></div>
  <div class="ip-sep"></div>
  <div class="ip-row"><span>Tokens</span><strong>936K</strong></div>
  <div class="ip-row"><span>Cost</span><strong style="color:var(--attention-fg)">$4.68</strong></div>
</div>

<script>
const CONNECTIONS = [
  // Simon — agentpane
  { from:'s-ap',  to:'s-ap-a1', color:'#58a6ff', label:'spawn' },
  { from:'s-ap-a1', to:'s-ap-s1', color:'#a371f7' },
  { from:'s-ap-a1', to:'s-ap-s2', color:'#a371f7' },
  // Simon — cli-monitor
  { from:'s-cm', to:'s-cm-a1', color:'#58a6ff', label:'spawn' },
  { from:'s-cm-a1', to:'s-cm-s1', color:'#a371f7' },
  { from:'s-cm-a1', to:'s-cm-s2', color:'#a371f7' },
  // Alex — backend-api
  { from:'a-ba', to:'a-ba-a1', color:'#3fb950', label:'spawn' },
  { from:'a-ba', to:'a-ba-a2', color:'#3fb950' },
  { from:'a-ba-a1', to:'a-ba-s1', color:'#3fb950' },
  { from:'a-ba-a2', to:'a-ba-s2', color:'#3fb950' },
  // Alex — frontend
  { from:'a-fe', to:'a-fe-a1', color:'#3fb950', label:'spawn' },
  { from:'a-fe', to:'a-fe-a2', color:'#3fb950' },
  { from:'a-fe-a1', to:'a-fe-s1', color:'#3fb950' },
  { from:'a-fe-a2', to:'a-fe-s2', color:'#3fb950' },
  // To shared infra
  { from:'s-ap-s1', to:'sdk', color:'#f778ba' },
  { from:'s-cm-s1', to:'sdk', color:'#f778ba' },
  { from:'a-ba-s1', to:'sdk', color:'#f778ba' },
  { from:'a-fe-s1', to:'sdk', color:'#f778ba' },
  { from:'s-ap', to:'events', color:'#e8883a' },
  { from:'a-ba', to:'events', color:'#e8883a' },
  { from:'a-fe', to:'events', color:'#e8883a' },
  { from:'s-cm', to:'events', color:'#e8883a', label:'events' },
];

const svg = document.getElementById('conn-svg');
const canvasEl = document.getElementById('canvas');

function getCenter(el) {
  const r = el.getBoundingClientRect(), cr = canvasEl.getBoundingClientRect();
  return { cx: r.left-cr.left+r.width/2, top: r.top-cr.top, bottom: r.top-cr.top+r.height };
}

function drawAll() {
  while(svg.childNodes.length>1) svg.removeChild(svg.lastChild);
  document.querySelectorAll('.conn-label').forEach(e=>e.remove());

  CONNECTIONS.forEach(conn => {
    const fromEl=document.querySelector(`[data-id="${conn.from}"]`);
    const toEl=document.querySelector(`[data-id="${conn.to}"]`);
    if(!fromEl||!toEl)return;
    const f=getCenter(fromEl), t=getCenter(toEl);
    const midY=(f.bottom+t.top)/2;
    const pts=[`${f.cx},${f.bottom}`,`${f.cx},${midY}`,`${t.cx},${midY}`,`${t.cx},${t.top}`];

    const poly=document.createElementNS('http://www.w3.org/2000/svg','polyline');
    poly.setAttribute('points',pts.join(' '));poly.setAttribute('fill','none');poly.setAttribute('stroke',conn.color);poly.setAttribute('stroke-opacity','0.3');poly.setAttribute('stroke-width','1.5');
    svg.appendChild(poly);

    const arrow=document.createElementNS('http://www.w3.org/2000/svg','polygon');
    arrow.setAttribute('points','-3,-7 3,-7 0,0');arrow.setAttribute('transform',`translate(${t.cx},${t.top})`);arrow.setAttribute('fill',conn.color);arrow.setAttribute('opacity','0.5');
    svg.appendChild(arrow);

    const circle=document.createElementNS('http://www.w3.org/2000/svg','circle');
    circle.setAttribute('r','2');circle.setAttribute('fill',conn.color);circle.setAttribute('filter','url(#glow)');svg.appendChild(circle);
    const segs=[];
    for(let i=0;i<pts.length-1;i++){const[x1,y1]=pts[i].split(',').map(Number);const[x2,y2]=pts[i+1].split(',').map(Number);segs.push({x1,y1,x2,y2,len:Math.sqrt((x2-x1)**2+(y2-y1)**2)});}
    const totalLen=segs.reduce((s,seg)=>s+seg.len,0);
    let t0=Math.random();const speed=0.003+Math.random()*0.002;
    (function tick(){t0=(t0+speed)%1;let dist=t0*totalLen;for(const seg of segs){if(dist<=seg.len){const frac=dist/seg.len;circle.setAttribute('cx',seg.x1+(seg.x2-seg.x1)*frac);circle.setAttribute('cy',seg.y1+(seg.y2-seg.y1)*frac);break;}dist-=seg.len;}requestAnimationFrame(tick);})();

    if(conn.label){const lbl=document.createElement('div');lbl.className='conn-label';lbl.textContent=conn.label;lbl.style.color=conn.color;lbl.style.left=((f.cx+t.cx)/2)+'px';lbl.style.top=(midY-12)+'px';lbl.style.transform='translateX(-50%)';canvasEl.appendChild(lbl);}
  });
}

function buildTicker(){
  const evs=[
    {t:'session:active',c:'#58a6ff',a:'simon',d:'agentpane · kanban-dnd'},
    {t:'agent:spawn',c:'#a371f7',a:'simon-01',d:'→ SortableCard + 2 subs'},
    {t:'session:active',c:'#58a6ff',a:'simon',d:'cli-monitor · hierarchy'},
    {t:'agent:spawn',c:'#a371f7',a:'simon-m42',d:'→ Tree Renderer + 2 subs'},
    {t:'agent:plan_ready',c:'#d29922',a:'agt-tree01',d:'Tree Renderer · approval'},
    {t:'session:active',c:'#3fb950',a:'alex',d:'backend-api · rate-limiter'},
    {t:'agent:spawn',c:'#3fb950',a:'alex-api',d:'→ Limiter + Tests + 2 subs'},
    {t:'session:active',c:'#3fb950',a:'alex',d:'frontend · dark-mode'},
    {t:'agent:spawn',c:'#3fb950',a:'alex-fe',d:'→ Theme + Toggle + 2 subs'},
    {t:'tool:Task',c:'#f778ba',a:'agt-sort01',d:'→ Tests sub (d2)'},
    {t:'tool:Task',c:'#f778ba',a:'agt-sort01',d:'→ Types sub (d2)'},
  ];
  const all=[...evs,...evs];const now=Date.now();
  document.getElementById('ticker-track').innerHTML=all.map((e,i)=>{
    const ts=new Date(now-(all.length-i)*3000).toLocaleTimeString('en-US',{hour12:false,hour:'2-digit',minute:'2-digit',second:'2-digit'});
    return `<div class="tk-ev"><span class="tk-dot" style="background:${e.c}"></span><span class="tk-type" style="color:${e.c}">${e.t}</span><span class="tk-dim">→</span><span>${e.a}</span>${e.d?`<span class="tk-dim">· ${e.d}</span>`:''}<span class="tk-dim">${ts}</span></div>`;
  }).join('');
}

buildTicker();
requestAnimationFrame(()=>requestAnimationFrame(drawAll));
let rt;window.addEventListener('resize',()=>{clearTimeout(rt);rt=setTimeout(drawAll,150);});
</script>
</body>
</html>
